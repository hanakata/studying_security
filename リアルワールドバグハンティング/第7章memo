第7章 クロスサイトスクリプティング

・XSSの種類
XSSには主にreflectedとstoredの2種類がある。
reflectedXSSはサイト上に保存されない単一のHTTPリクエストが配信されXSSペイロードを実行するもの
→最近はXSS Auditorを導入することで脆弱性を回避しようとしているがAuditor自体を回避することで攻撃できる

storedXSSはサイトが悪意あるペイロードを保存しそれをサニタイズせずに描画する際に起きる

XSS攻撃はDOMベース、blind、selfという3つのサブカテゴリに分類することができる。
DOMベースXSS攻撃は悪意あるJSを事項するのにWebサイトの既存のJSコード操作が関わる
blindXSSはstored Xss攻撃でハッカーがアクセスできないWebサイトの場所から他のユーザがXSSペイロードを描画するもの
selfXSS脆弱性はペイロードを入力したユーザにのみインパクトを及ぼせるもの

・Shopifiの卸売
XSSのペイロードは複雑なものである必要はないが、描画される場所に置きHTMLもしくはJSタグの中に含まれるように
あつらえる必要がある。
教訓
XSSをテストする際にはページのソースをみてペイロードがHTMLあるいはJSタグ中で描画されるかを確認する必要がある。

・Shopifiの通貨フォーマッティング
XSSペイロードはすぐに実行されるとは限らない
そのためペイロードが描画されうるすべての場所で適切にサニタイズされていることを確認すべき
教訓
XSSのペイロードは必ずしもサブミットされた直後に実行されるとは限らない。

